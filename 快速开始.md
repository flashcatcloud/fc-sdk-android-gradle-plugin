# Flashcat Android Gradle Plugin å¿«é€Ÿå¼€å§‹

## ğŸ“¦ æ’ä»¶ä»‹ç»

è¿™æ˜¯ä¸€ä¸ªç”¨äºä¸Šä¼  Proguard/R8 æ··æ·†æ˜ å°„æ–‡ä»¶å’Œ NDK ç¬¦å·æ–‡ä»¶åˆ° Flashcat å¹³å°çš„ Gradle æ’ä»¶ã€‚

**åŸºäº**: Datadog dd-sdk-android-gradle-plugin (Apache 2.0)  
**é€‚é…**: Flashcat å¹³å°

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åœ¨ build.gradle ä¸­å¼•å…¥æ’ä»¶

```groovy
plugins {
    id("cloud.flashcat.android-gradle-plugin") version "1.0.0"
}
```

æˆ–åœ¨ Kotlin DSL ä¸­ï¼š

```kotlin
plugins {
    id("cloud.flashcat.android-gradle-plugin") version "1.0.0"
}
```

### 2. é…ç½®æ’ä»¶

```groovy
flashcat {
    site = "CN"                    // Flashcat ç«™ç‚¹ï¼šCN æˆ– STAGING
    versionName = "1.3.0"          // å¯é€‰ï¼Œé»˜è®¤è¯»å– Android é…ç½®
    serviceName = "my-app"         // å¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨åŒ…å
}
```

### 3. é…ç½® API Key

**æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**

```bash
export FC_API_KEY="your-flashcat-api-key"
```

**æ–¹å¼ 2ï¼šGradle å±æ€§ (gradle.properties)**

```properties
FC_API_KEY=your-flashcat-api-key
```

**æ–¹å¼ 3ï¼šflashcat-ci.json æ–‡ä»¶**

```json
{
  "apiKey": "your-flashcat-api-key",
  "flashcatSite": "browser.flashcat.cloud"
}
```

### 4. ä¸Šä¼ æ–‡ä»¶

```bash
# ä¸Šä¼ æ··æ·†æ˜ å°„æ–‡ä»¶
./gradlew uploadMappingRelease

# ä¸Šä¼  NDK ç¬¦å·æ–‡ä»¶
./gradlew uploadNdkSymbolFilesRelease
```

---

## ğŸ“‹ å®Œæ•´é…ç½®é€‰é¡¹

```groovy
flashcat {
    // å¿…å¡«
    site = "CN"  // æˆ– "STAGING"

    // å¯é€‰é…ç½®
    versionName = "1.3.0"
    serviceName = "my-service"
    checkProjectDependencies = "warn"  // "warn", "fail" æˆ– "none"
    mappingFilePath = "path/to/mapping.txt"
    nonDefaultObfuscation = false
    ignoreFlashcatCiFileConfig = false
    additionalSymbolFilesLocations = ["/path/to/location/obj"]
}
```

---

## ğŸŒ å¯ç”¨ç«™ç‚¹

| ç«™ç‚¹    | åœ°å€                   | è¯´æ˜         |
| ------- | ---------------------- | ------------ |
| CN      | browser.flashcat.cloud | ç”Ÿäº§ç¯å¢ƒ     |
| STAGING | jira.flashcat.cloud    | å†…éƒ¨æµ‹è¯•ç¯å¢ƒ |

---

## ğŸ”‘ API Key ä¼˜å…ˆçº§

é…ç½®ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š

1. Gradle å±æ€§ (`FC_API_KEY` / `FLASHCAT_API_KEY`)
2. ç¯å¢ƒå˜é‡ (`FC_API_KEY` / `FLASHCAT_API_KEY`)
3. flashcat-ci.json æ–‡ä»¶ä¸­çš„ `apiKey`

---

## ğŸ¯ Variant é…ç½®

å¦‚æœéœ€è¦ä¸ºä¸åŒçš„ variant é…ç½®ä¸åŒçš„å‚æ•°ï¼š

```groovy
flashcat {
    site = "CN"  // é»˜è®¤é…ç½®

    variants {
        production {
            site = "CN"
            serviceName = "my-app-prod"
        }
        staging {
            site = "STAGING"
            serviceName = "my-app-staging"
        }
    }
}
```

---

## âš™ï¸ Gradle é…ç½®ç¼“å­˜æ”¯æŒ

å¦‚éœ€ä½¿ç”¨ Gradle é…ç½®ç¼“å­˜ï¼Œè¯·ç¦ç”¨ä¾èµ–æ£€æŸ¥ï¼š

```groovy
flashcat {
    checkProjectDependencies = "none"
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° API Key

**é”™è¯¯æ¶ˆæ¯**:

```
Make sure you define an API KEY to upload your mapping files to Flashcat.
Create a FC_API_KEY or FLASHCAT_API_KEY environment variable...
```

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
- æ£€æŸ¥ gradle.properties æ–‡ä»¶
- æ£€æŸ¥ flashcat-ci.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®

### é—®é¢˜ï¼šAPI Key æ ¼å¼é”™è¯¯

**é”™è¯¯æ¶ˆæ¯**:

```
FC_API_KEY provided shouldn't contain quotes or apostrophes.
```

**è§£å†³æ–¹æ¡ˆ**:

- ç§»é™¤ API Key ä¸­çš„å¼•å·
- ç¡®ä¿ç¯å¢ƒå˜é‡å€¼ä¸åŒ…å« `"` æˆ– `'`

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿè¯·è”ç³» Flashcat æŠ€æœ¯æ”¯æŒã€‚

---

## ğŸ“„ åè®®è¯´æ˜

æœ¬é¡¹ç›®åŸºäº Datadog çš„ dd-sdk-android-gradle-plugin è¿›è¡Œä¿®æ”¹å’Œé€‚é…ã€‚

- **åŸå§‹é¡¹ç›®**: https://github.com/DataDog/dd-sdk-android-gradle-plugin
- **åè®®**: Apache License 2.0
- **ç‰ˆæƒ**: åŸå§‹ä½œå“ Â© 2019-2024 Datadog, Inc. | ä¿®æ”¹éƒ¨åˆ† Â© 2025 Flashcat, Inc.

è¯¦è§ [FORK_NOTICE.md](FORK_NOTICE.md) å’Œ [LICENSE](LICENSE)ã€‚
